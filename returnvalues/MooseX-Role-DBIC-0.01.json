[
   {
      "PPI" : "PPI::Statement (but very likely crap)",
      "bad" : "role {\n\n    my $p        = shift;\n    my $name     = $p->schema_name;\n    my $desc     = $p->schema_description;\n    my $acc_opts = $p->accessor_options;\n    my $clearer  = sub { shift->${\\\"clear_${name}_schema\"}() };\n\n    my $common_opts = sub {\n        return (\n            trigger => $clearer,\n            @{ $acc_opts->{\"${name}_\".shift} || [] },\n        );\n    };\n\n    has \"${name}_dsn\" => (\n        documentation => \"DBI dsn for connecting to the $desc db\",\n        isa           => 'Str',\n        is            => 'rw',\n        required      => 1,\n        $common_opts->('dsn'),\n       );\n    has \"${name}_user\" => (\n        documentation  => \"username for connecting to the $desc db\",\n        isa            => 'Str',\n        is             => 'rw',\n        $common_opts->('user'),\n       );\n    has \"${name}_password\" => (\n        documentation => \"password for connecting to the $desc db\",\n        isa           => 'Str',\n        is            => 'rw',\n        $common_opts->('password'),\n       );\n\n    has \"${name}_attrs\" => (\n        documentation => \"hashref of DBI attributes for connecting to $desc db\",\n        is            => 'rw',\n        isa           => 'HashRef',\n        default       => sub { {} },\n        $common_opts->('attrs'),\n       );\n\n    has \"${name}_class\" => (\n        documentation => \"schema class name for the $desc schema\",\n        is            => 'rw',\n        isa           => 'Str',\n        required      => 1,\n        $common_opts->('class'),\n       );\n\n    has \"${name}_schema\" => (\n        is  => 'rw',\n        isa => 'Object',\n        lazy_build => 1,\n        @{ $acc_opts->{\"${name}_schema\"} || [] },\n        );\n\n    has \"${name}_schema_options\" => (\n        is      => 'rw',\n        isa     => 'HashRef',\n        default => sub { {} },\n        $common_opts->('schema_options'),\n      );\n\n    method \"_build_${name}_schema\" => sub {\n        my ( $self ) = @_;\n\n        my $schema_class = $self->${\\\"${name}_class\"}();\n        Class::MOP::load_class( $schema_class );\n\n        no strict 'refs';\n\n        return $schema_class->connect(\n            $self->${\\\"${name}_dsn\"}(),\n            $self->${\\\"${name}_user\"}(),\n            $self->${\\\"${name}_password\"}(),\n            $self->${\\\"${name}_attrs\"}(),\n            $self->${\\\"${name}_schema_options\"}(),\n          );\n    };\n}",
      "file" : "/var/tmp/arv_C_BW7Y/MooseX-Role-DBIC-0.01/lib/MooseX/Role/DBIC.pm",
      "package" : "MooseX::Role::DBIC"
   }
]
