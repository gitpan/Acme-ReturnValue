[
   {
      "PPI" : "PPI::Statement::Sub",
      "bad" : "sub sendendmail {\n\t($log, $state) = @_; \n\tmy $newmailer;\n\tmy $endbody = \"\";\n\t$uaend = LWP::UserAgent->new;\n\t$uaend->agent(\"Tinderbox Client (zach\\@zachlipton.com)\");\n\t\n\t$endbody .= \"tinderbox: tree: $Tinderconfig::tinderboxpage\\n\";\n\t$endbody .= 'tinderbox: builddate: '.$time.\"\\n\";\n\tif ($state eq \"pass\") {\n\t\t$endbody .= \"tinderbox: status: success\\n\";\n\t} elsif ($state eq \"fail\") {\n\t\t$endbody .= \"tinderbox: status: busted\\n\";\n\t} elsif ($state eq \"testfailed\") {\n\t\t$endbody .= \"tinderbox: status: testfailed\\n\";\n\t} else {\n\t\t$endbody .= \"tinderbox: status: busted\\n\"; \n\t}\n\t$endbody .= \"tinderbox: build: $Tinderconfig::boxname\\n\";\n\t$endbody .= \"tinderbox: errorparser: unix\\n\"; \n\t$endbody .= \"tinderbox: buildfamily: unix\\n\"; \n\t$endbody .= \"tinderbox: END\\n\\n\";\n\t$endbody .= $log; \n\n\tmy $req = POST 'http://tinderbox.perl.org/tinderbox/gettinderdata.cgi',\n\t\t[message => $endbody];\n\tprint $uaend->request($req)->as_string;\n}",
      "file" : "/var/tmp/arv_1IAzLl/Devel-Tinderclient-1.4/Tindermail/Http.pm",
      "package" : "Tindermail::Http"
   },
   {
      "PPI" : "PPI::Statement::Sub",
      "bad" : "sub sendendmail {\n\t($log, $state) = @_; \n\tmy $newmailer;\n\tmy $endbody = \"\";\n\t$newmailer = new Mail::Mailer 'smtp', Server => $Tinderconfig::mailserver;\n\t$newmailer->open(\\%headers);\n\t\n\tprint $newmailer \"tinderbox: tree: $Tinderconfig::tinderboxpage\\n\";\n\tprint $newmailer 'tinderbox: builddate: '.$time.\"\\n\";\n\tif ($state eq \"pass\") {\n\t\tprint $newmailer \"tinderbox: status: success\\n\";\n\t} elsif ($state eq \"fail\") {\n\t\tprint $newmailer \"tinderbox: status: busted\\n\";\n\t} elsif ($state eq \"testfailed\") {\n\t\tprint $newmailer \"tinderbox: status: testfailed\\n\";\n\t} else {\n\t\tprint $newmailer \"tinderbox: status: busted\\n\"; \n\t}\n\tprint $newmailer \"tinderbox: build: $Tinderconfig::boxname\\n\";\n\tprint $newmailer \"tinderbox: errorparser: unix\\n\"; \n\tprint $newmailer \"tinderbox: buildfamily: unix\\n\"; \n\tprint $newmailer \"tinderbox: END\\n\\n\";\n\tprint $newmailer $log; \n\n\t$newmailer->close();\n}",
      "file" : "/var/tmp/arv_1IAzLl/Devel-Tinderclient-1.4/Tindermail/MailMailer.pm",
      "package" : "Tindermail::MailMailer"
   }
]
