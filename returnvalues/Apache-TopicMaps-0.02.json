[
   {
      "PPI" : "PPI::Statement::Sub",
      "bad" : "sub do\n{\n\tmy ($r,$tm) = @_;\n\n\n\tmy %params = $r->args;\t\n  \t$r->send_http_header('text/html');\n\t$r->print(qq{\n\t<HTML>\n\t<HEAD><TITLE>TMS </TITLE>\n\t</HEAD>\n\t<body>\n\t<p>\n\t<form>\n\tNew search:&nbsp;<input type=\"text\" size=\"10\" name=\"query\" value=\"$params{query}\"/>\n\t</form>\n\t</p>\n\t<p>All matches for \n\t<b>$params{query} </b>\n\t</p>\n\t});\n\n\tprint STDERR \"1\\n\";\n\n\tmy $user_data = { 'request' => $r , 'topicmap' => $tm};\n\tprint STDERR \"2\\n\";\n\tif(exists $params{query} &&  $params{query})\n\t{\n\tprint STDERR \"3\\n\";\n       \t$tm->query2(\\$user_data, \\&hitlist_start_html, \\&hitlist_end_html, \"VIEW hitlist(query=$params{query})\" );\n\t}\n\n\t$r->print(qq{\n\t\n\t</body>\n\t</html>\n\t});\n\treturn OK;\n}",
      "file" : "/var/tmp/arv_NydbEi/Apache-TopicMaps/lib/Apache/TopicMaps/text/html/search.pm",
      "package" : "Apache::TopicMaps::text::html::search"
   },
   {
      "PPI" : "PPI::Statement::Sub",
      "bad" : "sub make_label\n{\n\tmy ($tm,$topic) = @_;\n\tmy $x = \"no-label\";\n\tmy $names = $tm->get_property($topic, $SAM .\"::BaseNames\");\n\tif(!$names) { $names = $tm->get_property($topic, $SAM .\"::SubjectIndicators\"); }\n\tif(!$names) { $names = [ $tm->get_property($topic, $SAM .\"::SubjectAddress\")] };\n\tif(!$names) { $names =  $tm->get_property($topic, $SAM .\"::SourceLocators\") };\n\tif($names) { $x = join( \" , \",@$names) . \"[$topic]\"; };\n\tmy $url = \"topic?topic=\" . uri_escape( $tm->get_sidp_string($topic) );\n\tmy $s = qq{<a href=\"$url\">$x</a>};\n\n\n\treturn ($s);\n}",
      "file" : "/var/tmp/arv_NydbEi/Apache-TopicMaps/lib/Apache/TopicMaps/text/html/topic.pm",
      "package" : "Apache::TopicMaps::text::html::topic"
   }
]
