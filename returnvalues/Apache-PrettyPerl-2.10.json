[
   {
      "PPI" : "PPI::Statement::Sub",
      "bad" : "sub perl2html\n{\n\tmy $yet_to_process = join (\"\\n\", @_);\n\tmy $processed = '';\n\n\tmy @Buffer = ();\n\t$BufferFill = 0;\n\n\t$yet_to_process =~ s/$alrm//g;\n\t$yet_to_process =~ s/\\r//g;\n\n\twhile ($yet_to_process =~ m!\n\t(\n\t\t[\"'\\#]\t\t\t\t# normal strings and comments\n\t|\t[\\@\\%\\$\\&]\t\t\t# variables\n\t|\t\\b\\d+\\b\t\t\t\t# numbers\n\t|\t\\b(?:m|s|y|tr)[^A-Za-z0-9\\s]\t# regexen\n\t|\t[\\!=]~\\s*/\t\t\t# regex short form\n\t|\tq[qwxr]?[^A-Za-z0-9\\s]\t\t# more strings\n\t|\t\\w+\\s*=>\t\t\t# hashes\n\t|\t<<(['\"]?)\\w+\\2;?\\n\t\t# multi-line strings\n\t|\t\\n=\\w+\t\t\t\t# pod\n\t|\t<\\w+>\t\t\t\t# filehandles\n\t)!xso)\n\t{\n\t\tmy $match = $&;\n\t\t$processed .= $`;\n\t\t$yet_to_process = $';\n\t\n\t\tif ($match eq '\"')\n\t\t{\n\t\t\tif ($yet_to_process =~ m/^((?:\\\\.|[^\"\\\\])*)\"/s)\n\t\t\t{\n\t\t\t\t$processed .= qq#$alrm!STRING!$alrm$BufferFill$alrm#;\n\t\t\t\t$yet_to_process = $';\n\n\t\t\t\t$Buffer[$BufferFill] = qq#\"$1\"#;\n\t\t\t\t$BufferFill++;\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\t$processed .= qq#$alrm!ERROR!$alrm$BufferFill$alrm#;\n\n\t\t\t\t$Buffer[$BufferFill] = qq#$match#;\n\t\t\t\t$BufferFill++;\n\t\t\t}\n\t\t}\n\t\telsif ($match eq \"'\")\n\t\t{\n\t\t\tif ($yet_to_process =~ m/^((?:\\\\'|[^'])*)'/s)\n\t\t\t{\n\t\t\t\t$processed .= qq#$alrm!STRING!$alrm$BufferFill$alrm#;\n\t\t\t\t$yet_to_process = $';\n\n\t\t\t\t$Buffer[$BufferFill] = qq#'$1'#;\n\t\t\t\t$BufferFill++;\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\t$processed .= qq#$alrm!ERROR!$alrm$BufferFill$alrm#;\n\n\t\t\t\t$Buffer[$BufferFill] = qq#$match#;\n\t\t\t\t$BufferFill++;\n\t\t\t}\n\t\t}\n\t\telsif ($match eq '#')\n\t\t{\n\t\t\tif ($yet_to_process =~ m/.*/m)\n\t\t\t{\n\t\t\t\t$processed .= qq#$alrm!COMMENT!$alrm$BufferFill$alrm#;\n\t\t\t\t$yet_to_process = $';\n\n\t\t\t\t$Buffer[$BufferFill] = '#' . $&;\n\t\t\t\t$BufferFill++;\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tdie 'You should NEVER get here!';\n\t\t\t}\n\t\t}\n\t\telsif ($match =~ m/^[\\@\\%\\$\\&]/)\n\t\t{\n\t\t\tif (($match eq '&') and ($yet_to_process =~ m/^\\&/))\n\t\t\t{\n\t\t\t\t$processed .= '&&';\n\t\t\t\t$yet_to_process = $';\n\t\t\t}\n\t\t\telsif ($yet_to_process =~ m#\\$*(?:[^A-Za-z:\\s]|(?:::)?[A-Za-z](?:\\w|::)*)#)\n\t\t\t{\n\t\t\t\t$processed .= qq#$alrm!VARIABLE!$alrm$BufferFill$alrm#;\n\t\t\t\t$yet_to_process = $';\n\n\t\t\t\t$Buffer[$BufferFill] = $match . $&;\n\t\t\t\t$BufferFill++;\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\t$processed .= qq#$alrm!ERROR!$alrm$BufferFill$alrm#;\n\n\t\t\t\t$Buffer[$BufferFill] = qq#$match#;\n\t\t\t\t$BufferFill++;\n\t\t\t}\n\t\t}\n\t\telsif ($match =~ m/^\\d+$/)\n\t\t{\n\t\t\t$processed .= qq#$alrm!NUMBER!$alrm$BufferFill$alrm#;\n\t\t\t\n\t\t\t$Buffer[$BufferFill] = $match;\n\t\t\t$BufferFill++;\n\t\t}\n\t\t\t\n\t\telsif ($match =~ m/^(q[qwxr]?)(.)/)\n\t\t{\n\t\t\tmy $type = $1;\n\t\t\tmy $delim = $2;\n\t\t\t$delim =~ tr/([{</)]}>/;\n\t\t\t$delim = quotemeta ($delim);\n\n\t\t\tmy $tmp = \"^((?:\\\\\\\\$delim|[^$delim])*)($delim)\";\n\n\t\t\tif ($yet_to_process =~ m/$tmp/s)\n\t\t\t{\n\t\t\t\t$yet_to_process = $';\n\n\t\t\t\tif ($type eq 'qr')\n\t\t\t\t{\n\t\t\t\t\t$processed .= qq#$alrm!KEYWORD!$alrm$BufferFill$alrm#;\n\t\t\t\t\t$Buffer[$BufferFill] = $match;\n\t\t\t\t\t$BufferFill++;\n\n\t\t\t\t\t$processed .= qq#$alrm!REGEX!$alrm$BufferFill$alrm#;\n\t\t\t\t\t$Buffer[$BufferFill] = $1;\n\t\t\t\t\t$BufferFill++;\n\n\t\t\t\t\t$processed .= qq#$alrm!KEYWORD!$alrm$BufferFill$alrm#;\n\t\t\t\t\t$Buffer[$BufferFill] = $2;\n\t\t\t\t\t$BufferFill++;\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\t$processed .= qq#$alrm!STRING!$alrm$BufferFill$alrm#;\n\t\t\t\t\t$Buffer[$BufferFill] = $match . $&;\n\t\t\t\t\t$BufferFill++;\n\t\t\t\t}\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\t$processed .= qq#$alrm!ERROR!$alrm$BufferFill$alrm#;\n\n\t\t\t\t$Buffer[$BufferFill] = qq#$match#;\n\t\t\t\t$BufferFill++;\n\t\t\t}\n\t\t}\n\t\telsif ($match =~ m/^<<(['\"]?)(\\w+)/)\n\t\t{\n\t\t\tmy $type = $1;\n\t\t\tmy $delim = $2;\n\t\t\t\n\t\t\tif ($yet_to_process =~ m/(.*?\\n$delim)([\\$\\n])/s)\n\t\t\t{\n\t\t\t\t$processed .= qq#$alrm!STRING!$alrm$BufferFill$alrm#;\n\t\t\t\t$yet_to_process = $2 . $';\n\n\t\t\t\t$Buffer[$BufferFill] = $match . $1;\n\t\t\t\t$BufferFill++;\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\t$processed .= qq#$alrm!ERROR!$alrm$BufferFill$alrm#;\n\n\t\t\t\t$Buffer[$BufferFill] = qq#$match#;\n\t\t\t\t$BufferFill++;\n\t\t\t}\n\t\t}\n\t\telsif ($match =~ m#^(?:[=!]~\\s*/|m[^A-Za-z0-9\\s])#s)\n\t\t{\n\t\t\tmy $delim;\n\n\t\t\tif ($match =~ m#^([=!]~\\s*)/#)\n\t\t\t{\n\t\t\t\t$processed .= $1;\n\t\t\t\t$delim = '/';\n\t\t\t}\n\t\t\telsif ($match =~ m/^m(.)/)\n\t\t\t{\n\t\t\t\t$delim = $1;\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tdie 'You should NEVER get here!';\n\t\t\t}\n\n\t\t\t$processed .= qq#$alrm!KEYWORD!$alrm$BufferFill$alrm#;\n\t\t\t$Buffer[$BufferFill] = $match;\n\t\t\t$BufferFill++;\n\n\t\t\t$delim =~ tr/([{</)]}>/;\n\n\t\t\t\n\t\t\t$delim = quotemeta ($delim);\n\n\t\t\tmy $tmp = \"^((?:\\\\\\\\$delim|[^$delim])*)($delim\" . '[gcimosx]*)';\n\n\t\t\tif ($yet_to_process =~ m/$tmp/s)\n\t\t\t{\n\t\t\t\t$yet_to_process = $';\n\t\t\t\t$processed .= qq#$alrm!REGEX!$alrm$BufferFill$alrm#;\n\t\t\t\t$Buffer[$BufferFill] = $1;\n\t\t\t\t$BufferFill++;\n\n\t\t\t\t$processed .= qq#$alrm!KEYWORD!$alrm$BufferFill$alrm#;\n\t\t\t\t$Buffer[$BufferFill] = $2;\n\t\t\t\t$BufferFill++;\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\t$processed .= qq#$alrm!ERROR!$alrm$BufferFill$alrm#;\n\n\t\t\t\t$Buffer[$BufferFill] = qq#$match#;\n\t\t\t\t$BufferFill++;\n\t\t\t}\n\t\t}\n\t\telsif ($match =~ m#^(?:s|y|tr)([^A-Za-z0-9\\s])#)\n\t\t{\n\t\t\tmy $delim = $1;\n\t\t\t$delim =~ tr/([{</)]}>/;\n\t\t\t$delim = quotemeta ($delim);\n\n\t\t\t$processed .= qq#$alrm!KEYWORD!$alrm$BufferFill$alrm#;\n\t\t\t$Buffer[$BufferFill] = $match;\n\t\t\t$BufferFill++;\n\n\t\t\tmy $tmp = \"^((?:\\\\\\\\$delim|[^$delim])*)($delim)\";\n\n\t\t\tif ($yet_to_process =~ m/$tmp/s)\n\t\t\t{\n\t\t\t\t$yet_to_process = $';\n\t\t\t\t$processed .= qq#$alrm!REGEX!$alrm$BufferFill$alrm#;\n\t\t\t\t$Buffer[$BufferFill] = $1;\n\t\t\t\t$BufferFill++;\n\n\t\t\t\t$processed .= qq#$alrm!KEYWORD!$alrm$BufferFill$alrm#;\n\t\t\t\t$Buffer[$BufferFill] = $2;\n\n\t\t\t\t$tmp = '^';\n\n\t\t\t\tif ($delim =~ m/^[\\)\\]\\}>]$/)\n\t\t\t\t{\n\t\t\t\t\tif ($yet_to_process =~ m/[\\(\\[\\{<]/)\n\t\t\t\t\t{\n\t\t\t\t\t\t$Buffer[$BufferFill] .= $&;\n\n\t\t\t\t\t\t$tmp .= quotemeta ($&);\n\t\t\t\t\t\t$delim = $&;\n\t\t\t\t\t\t$delim =~ tr/([{</)]}>/;\n\t\t\t\t\t\t$delim = quotemeta ($delim);\n\t\t\t\t\t}\n\t\t\t\t\telse\n\t\t\t\t\t{\n\t\t\t\t\t\t$delim = '';\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\t$BufferFill++;\n\n\t\t\t\t$tmp .= \"((?:\\\\\\\\$delim|[^$delim])*)($delim\" . '[egimosx]*)';\n\n\t\t\t\tif ($delim and ($yet_to_process =~ m/$tmp/s))\n\t\t\t\t{\n\t\t\t\t\t$yet_to_process = $';\n\t\t\t\t\t$processed .= qq#$alrm!STRING!$alrm$BufferFill$alrm#;\n\t\t\t\t\t$Buffer[$BufferFill] = $1;\n\t\t\t\t\t$BufferFill++;\n\n\t\t\t\t\t$processed .= qq#$alrm!KEYWORD!$alrm$BufferFill$alrm#;\n\t\t\t\t\t$Buffer[$BufferFill] = $2;\n\t\t\t\t\t$BufferFill++;\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t}\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\t$processed .= qq#$alrm!ERROR!$alrm$BufferFill$alrm#;\n\n\t\t\t\t$Buffer[$BufferFill] = qq#$match#;\n\t\t\t\t$BufferFill++;\n\t\t\t}\n\t\t}\n\t\telsif ($match =~ m#\\n=(.*)#m)\n\t\t{\n\t\t\tmy $type = $1;\n\t\t\tif ($yet_to_process =~ m/(.*?)\\n=cut\\n/s)\n\t\t\t{\n\t\t\t\t$processed .= qq#\\n$alrm!POD!$alrm$BufferFill$alrm\\n#;\n\t\t\t\t$yet_to_process = $';\n\n\t\t\t\t$Buffer[$BufferFill] = \"=$type\\n$1\";\n\t\t\t\t$BufferFill++;\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\t$processed .= qq#$alrm!POD!$alrm$BufferFill$alrm#;\n\n\t\t\t\t$Buffer[$BufferFill] = $match . $yet_to_process;\n\t\t\t\t$BufferFill++;\n\n\t\t\t\t$yet_to_process = '';\n\t\t\t}\n\t\t}\n\t\telsif ($match =~ m/^(\\w+)(\\s*=>)$/)\n\t\t{\n\t\t\t$processed .= qq#$alrm!STRING!$alrm$BufferFill$alrm# . $2;\n\n\t\t\t$Buffer[$BufferFill] = $1;\n\t\t\t$BufferFill++;\n\t\t}\n\t\telsif ($match =~ m#<\\w+>#)\n\t\t{\n\t\t\t$processed .= qq#$alrm!FILEHANDLE!$alrm$BufferFill$alrm#;\n\t\t\t$Buffer[$BufferFill] = $&;\n\t\t\t$BufferFill++;\n\t\t}\n\t\telse\n\t\t{\n\t\t\t$processed .= qq#$alrm!ERROR!$alrm$BufferFill$alrm#;\n\n\t\t\t$Buffer[$BufferFill] = qq#$match#;\n\t\t\t$BufferFill++;\n\t\t}\n\t}\n\n\t$_ = html_escape ($processed . $yet_to_process);\n\n\tmy $re;\n\t{\n\t\tmy $temp = '';\n\t\t$temp = join ('|', map { quotemeta ($_) } (@KeyWords));\n\n\t\t$re = qr#$temp#;\n\t}\n\n\ts#\\b($re)\\b#<span class=\"keyword\">$1</span>#g;\n\t\n\ts#$alrm!STRING!$alrm(\\d+)$alrm#string2html ($Buffer[$1])#ge;\n\ts#$alrm!REGEX!$alrm(\\d+)$alrm#regex2html ($Buffer[$1])#ge;\n\ts#$alrm!(\\w+)!$alrm(\\d+)$alrm#\"<span class=\\\"\\L$1\\E\\\">\" . html_escape ($Buffer[$2]) . '</span>'#ge;\n\n\treturn (qq#\\n<div class=\"source\">\\n$_</div>\\n#);\n}",
      "file" : "/var/tmp/arv_Vw_wEx/Apache-PrettyPerl-2.10/PrettyPerl.pm",
      "package" : "Apache::PrettyPerl"
   }
]
