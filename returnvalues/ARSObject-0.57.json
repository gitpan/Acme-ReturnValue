[
   {
      "PPI" : "PPI::Statement::Sub",
      "bad" : "sub cfprun {\t\n my ($s, $cmsg, $cfld, $cfld0, $cfld1) =@_;\n my $hmsg =ref($cmsg) eq 'HASH' \n\t? $cmsg \n\t: ($s->{-lang} ||'') =~/^ru/i\n\t? {'Error'=>'������', 'Warning'=>'��������������', 'Success'=>'�������'\n\t\t,'Executing'=>'����������', 'Done'=>'���������'}\n\t: {};\n $cmsg =sub{\"\\n<br /><font style=\\\"font-weight: bolder\\\"\"\n\t\t.($_[1] =~/^(?:Error|Warning)/ ? ' color=\"red\"' : '')\n\t\t.'>'\n\t\t.(defined($_[1]) ? $_[0]->{-cgi}->escapeHTML($hmsg->{$_[1]} ||$_[1]) : 'undef')\n\t\t.\": \"\n\t\t.(defined($_[2]) ? $_[0]->{-cgi}->escapeHTML($hmsg->{$_[2]} ||$_[2]) : 'undef')\n\t\t.\"</font>\"\n\t\t}\n\tif !$cmsg || (ref($cmsg) ne 'CODE');\n my $emsg =sub{\t\n\t\t$CGI::Carp::CUSTOM_MSG\n\t\t? &$CGI::Carp::CUSTOM_MSG($_[1])\n\t\t: print(&$cmsg($_[0], 'Error', $_[1]))\n\t\t};\n $cfld =sub{\"\\n<tr><th align=\\\"left\\\" valign=\\\"top\\\">\"\n\t\t. ($_[1]->{-namehtml}\n\t\t\t? &{$_[1]->{-namehtml}}(@_)\n\t\t\t: $_[0]->{-cgi}->escapeHTML($_[1]->{-namelbl}||''))\n\t\t. \"</th>\\n<td align=\\\"left\\\" valign=\\\"top\\\">\"\n\t\t. $_[2]\n\t\t. \"</td></tr>\"\n\t\t}\n\tif !$cfld;\n $cfld0=\"\\n<table>\"\tif !$cfld0;\n $cfld1=\"\\n</table>\"\tif !$cfld1;\n $s->cgi();\n cfpinit($s);\n local $s->{-fpmsg} =$cmsg;\n my $err;\n my $act;\n my $acf;\n my $aec;\n my $arv;\n foreach my $f (@{$s->{-fpl}}) {\n\tnext\tif (ref($f) ne 'HASH')\n\t\t|| (exists($f->{-used}) && !$f->{-used});\n\tif ($f->{-preact} && ($f->{-preact} !~/^\\d$/) && cfpvv($s, $f)) {\n\t\t$acf =1;\n\t\t$act =[] if !$act;\n\t\tpush @$act, $f\n\t}\n\tif ($f->{-action} && ($f->{-action} !~/^\\d$/) && cfpvv($s, $f)) {\n\t\t$aec =cfpvv($s, $f);\n\t}\n\tif ($f->{-key} && $act && !$err) {\n\t\t$arv =1;\n\t\tforeach my $a (@$act) {\n\t\t\t$arv =cfpaction($s, $a, '-preact', $arv, $f);\n\t\t\tnext if $arv;\n\t\t\t$err =$@;\n\t\t\tlast\n\t\t}\n\t\t$act =undef;\n\t\tif (!$arv) {\n\t\t\t&$emsg($s, $err ||\"Unknown 'cfpaction' error\");\n\t\t\t$err =1;\n\t\t\tlast;\n\t\t}\n\t}\n\tif ($f->{-key}) {\n\t\t$act =undef;\n\t}\n\tnext if !cfpused($s, $f);\n\tmy $fn =cfpn($s, $f);\n\tif (!$f->{-reset}\n\t\t? undef\n\t\t: ref($f->{-reset}) eq 'CODE'\n\t\t? &{$f->{-reset}}($s, $f)\n\t\t: ref($f->{-reset}) eq 'ARRAY'\n\t\t? grep {cfpvcc($s, $_)} @{$f->{-reset}}\n\t\t: $f->{-reset}\n\t\t? cfpvcc($s, $f->{-reset})\n\t\t: undef\n\t\t) {\n\t\t$s->{-cgi}->delete($fn);\n\t}\n\tmy $fv =exists($f->{-computed})\n\t\t? (ref($f->{-computed}) eq 'CODE'\n\t\t\t? &{$f->{-computed}}($s, $f)\n\t\t\t: ref($f->{-computed}) eq 'ARRAY'\n\t\t\t? cfpvv($s, @{$f->{-computed}})\n\t\t\t: $f->{-computed})\n\t\t: cfpvv($s, $f);\n\tlocal $_ =$fv;\n\tif (!($f->{-action} || $f->{-preact}) && $f->{-namecgi}) {\n\t\tif (defined($fv)) {\n\t\t\tif ((defined($f->{-lbtran}) ? $f->{-lbtran} : 0)\n\t\t\t&& (ref($f->{-labels}) eq 'HASH') && !exists($f->{-labels}->{$fv})) {\n\t\t\t\tforeach my $k (keys %{$f->{-labels}}) {\n\t\t\t\t\tnext if $fv ne $f->{-labels}->{$k};\n\t\t\t\t\t$fv =$k;\n\t\t\t\t\tlast;\n\t\t\t\t}\n\t\t\t\tprint &$cmsg($s, 'Warning'\n\t\t\t\t\t, \"'\" .($f->{-namelbl} ||$f->{-namecgi} ||$f->{-namedb})\n\t\t\t\t\t.\"' == ?\\\"$fv\\\"?\")\n\t\t\t\t\tif !exists($f->{-labels}->{$fv})\n\t\t\t\t\t&& !$f->{-lbadd}\n\t\t\t}\t\t\t\n\t\t\tif ((defined($f->{-lbadd}) ? $f->{-lbadd} : 0)) {\n\t\t\t\t$f->{-values} =do{use locale;\n\t\t\t\t\t[sort {lc($f->{-labels}->{$a}) cmp lc($f->{-labels}->{$b})} keys %{$f->{-labels}}]}\n\t\t\t\t\tif (ref($f->{-labels}) eq 'HASH')\n\t\t\t\t\t&& !$f->{-values};\n\t\t\t\tpush @{$f->{-values}}, $fv\n\t\t\t\t\tif (ref($f->{-values}) eq 'ARRAY')\n\t\t\t\t\t&& !grep /^\\Q$fv\\E$/, @{$f->{-values}};\n\t\t\t}\n\t\t}\n\t\t$f->{-labels} =&{$f->{-labels}}($s, $f, $_ =$fv)\n\t\t\tif ref($f->{-labels}) eq 'CODE';\n\t\t$f->{-values} =&{$f->{-values}}($s, $f, $_ =$fv)\n\t\t\tif ref($f->{-values}) eq 'CODE';\n\t\t$f->{-values} =do{use locale;\n\t\t\t\t[sort {lc($f->{-labels}->{$a}) cmp lc($f->{-labels}->{$b})} keys %{$f->{-labels}}]}\n\t\t\tif $f->{-labels}\n\t\t\t&& !$f->{-values};\n\t\tif ($f->{-values}\n\t\t&& (!defined($fv) || !grep /^\\Q$fv\\E$/, @{$f->{-values}})) {\n\t\t\t$fv =$f->{-values}->[0];\n\t\t\t$fv ='' if !defined($fv);\n\t\t\t$s->{-cgi}->delete(\"${fn}__C_\")\tif $f->{-change};\n\t\t}\n\t\tif (defined($fv)) {\n\t\t\t$s->{-cgi}->param($fn, $fv);\n\t\t\t$s->{-cgi}->param(\"${fn}__PV_\", $fv)\n\t\t\t\tif !defined($s->{-cgi}->param(\"${fn}__PV_\"));\n\t\t}\n\t\telse {\n\t\t\t$s->{-cgi}->delete($fn);\n\t\t}\n\t}\n\tforeach my $q ('-change', '-changelb') {\n\t\tnext if !$f->{$q};\n\t\tlast if !cfpvcc($s, $f);\n\t\tmy $c =ref($f->{$q}) eq 'CODE' ? &{$f->{$q}}($s, $f, $_ =$fv) : $f->{$q};\n\t\t$c =ref($c) ne 'HASH' ? undef : ref($c->{$fv}) eq 'HASH' ? $c->{$fv} : $c;\n\t\tif (ref($c) eq 'HASH') {\n\t\t\tforeach my $k (keys %$c) {\n\t\t\t\tnext if $k =~/^-/;\n\t\t\t\tdefined($c->{$k})\n\t\t\t\t? $s->{-cgi}->param(cfpn($s, $k)\n\t\t\t\t\t, ref($c->{$k}) eq 'CODE'\n\t\t\t\t\t? &{$c->{$k}}($s, $f, $_ =$fv)\n\t\t\t\t\t: $c->{$k}\n\t\t\t\t\t)\n\t\t\t\t: $s->{-cgi}->delete(cfpn($s, $k))\n\t\t\t}\n\t\t}\n\t}\n\tif (my $ev =!$aec || !$f->{-error}\n\t\t? undef\n\t\t: ref($f->{-error}) eq 'CODE'\n\t\t? &{$f->{-error}}($s, $f, $_ =$fv, cfpvp($s, $f), $aec)\n\t\t: !ref($f->{-error}) && (!defined($fv) || ($fv eq ''))\n\t\t? $f->{-error}\n\t\t: undef\n\t\t) {\n\t\tprint &$cmsg($s, 'Error', \"'\" .$f->{-namelbl} .\"' - $ev\");\n\t\t$err =1;\n\t}\n\tif (my $ev =!$f->{-warn}\n\t\t? undef\n\t\t: ref($f->{-warn}) eq 'CODE'\n\t\t? &{$f->{-warn}}($s, $f, $_ =$fv, cfpvp($s, $f), $aec)\n\t\t: !ref($f->{-warn}) && (!defined($fv) || ($fv eq ''))\n\t\t? $f->{-warn}\n\t\t: undef\n\t\t) {\n\t\tprint &$cmsg($s, 'Warning', \"'\" .$f->{-namelbl} .\"' - $ev\");\n\t}\n }\n return(undef)\n\tif $err;\n $act =\t$acf =$arv =undef;\n foreach my $f (@{$s->{-fpl}}) {\n\tnext\tif (ref($f) ne 'HASH')\n\t\t|| (exists($f->{-used}) && !$f->{-used});\n\tnext if !cfpused($s, $f);\n\tif ($f->{-action} && ($f->{-action} !~/^\\d$/) && cfpvv($s, $f)) {\n\t\t$acf =1;\n\t\t$act =[] if !$act;\n\t\tpush @$act, $f\n\t}\n\tif ($f->{-key} && $act && !$err) {\n\t\t$arv =1;\n\t\tforeach my $a (@$act) {\n\t\t\tprint &$cmsg($s, 'Executing', ($a->{-namelbl} ||$a->{-namecgi} ||'') .' ', $arv)\n\t\t\t\tif $a->{-namelbl} ||$a->{-namecgi};\n\t\t\t$arv =cfpaction($s, $a, '-action', $arv, $f);\n\t\t\tnext if $arv;\n\t\t\t$err =$@;\n\t\t\tlast;\n\t\t}\n\t\t$act =undef;\n\t\tif (!$arv) {\n\t\t\t&$emsg($s, $err ||\"Unknown 'cfpaction' error\");\n\t\t\t$err =1;\n\t\t\tlast;\n\t\t}\n\t}\n\tif ($f->{-key}) {\n\t\t$act =undef;\n\t}\n }\n if ($acf) {\n\tprint &$cmsg($s, 'Done', $err ? ('Error', $@) : ('Success', $arv))\n }\n return(undef)\n\tif $err;\n return(1)\n\tif $acf;\n foreach my $f (@{$s->{-fpl}}) {\n\tnext\tif (ref($f) ne 'HASH')\n\t\t|| (exists($f->{-used}) && !$f->{-used});\n\tnext if exists($f->{-widget}) && !defined($f->{-widget});\n\tnext if !$f->{-namecgi};\n\tmy $u =cfpused($s, $f);\n\tnext if $u && !($f->{-hidden} ||((ref($f->{-values}) eq 'ARRAY') && !scalar(@{$f->{-values}})));\n\tprint \tdefined(cfpvp($s, $f)) \n\t\t? '<input type=\"hidden\" name=\"' .$f->{-namecgi} .'__PV_\" value=\"' \n\t\t\t.$s->{-cgi}->escapeHTML(cfpvp($s, $f))\n\t\t\t.'\" />' .\"\\n\"\n\t\t: ''\n\t\t, !$u\n\t\t? (\tdefined($s->{-cgi}->param($f->{-namecgi}))\n\t\t\t? '<input type=\"hidden\" name=\"' .$f->{-namecgi} .'\" value=\"'\n\t\t\t\t.$s->{-cgi}->escapeHTML($s->{-cgi}->param($f->{-namecgi}))\n\t\t\t\t.'\" />' .\"\\n\"\n\t\t\t: '')\n\t\t: defined(cfpvv($s, $f))\n\t\t? '<input type=\"hidden\" name=\"' .$f->{-namecgi} .'\" value=\"'\n\t\t\t.$s->{-cgi}->escapeHTML(cfpvv($s, $f))\n\t\t\t.'\" />' .\"\\n\"\n\t\t: '';\n }\n print ref($cfld0) ? &{$cfld0}($s) : $cfld0;\n my $bb ='';\n foreach my $f (@{$s->{-fpl}}) {\n\tnext\tif (ref($f) ne 'HASH')\n\t\t|| (exists($f->{-used}) && !$f->{-used});\n\tnext if !cfpused($s, $f);\n\tnext if exists($f->{-widget}) && !defined($f->{-widget});\n\tnext if $f->{-hidden} ||((ref($f->{-values}) eq 'ARRAY') && !scalar(@{$f->{-values}}));\n\tmy $bf =$f->{-action} ||$f->{-preact};\n\tif ($f->{-action} ||$f->{-preact}) {\n\t\t$bb .=' ' if $bb;\n\t\t$bb .=\texists($f->{-widget}) && !$f->{-widget}\n\t\t\t? ''\n\t\t\t: !ref($f->{-widget}) && $f->{-widget}\n\t\t\t? $f->{-widget}\n\t\t\t: ref($f->{-widget}) eq 'CODE'\n\t\t\t? &{$f->{-widget}}($s, $f, cfpvv($s, $f), cfpvp($s, $f))\n\t\t\t: !$f->{-namecgi}\n\t\t\t? ''\n\t\t\t: ref($f->{-widget}) eq 'HASH'\n\t\t\t? $s->{-cgi}->submit(-name=>$f->{-namecgi}, -title=>$f->{-namecmt}, -value=>$f->{-namelbl}\n\t\t\t\t, %{$f->{-widget}})\n\t\t\t: $s->{-cgi}->submit(-name=>$f->{-namecgi}, -title=>$f->{-namecmt}, -value=>$f->{-namelbl}\n\t\t\t\t, map {defined($f->{$_}) ? ($_=>$f->{$_}) : ()} qw(-class -style));\n\t\tnext\n\t}\n\telsif ($bb) {\n\t\tprint &$cfld($s, {}, $bb);\n\t\t$bb ='';\n\t}\n\tprint &$cfld($s\n\t, $f->{-action} ||$f->{-preact}\n\t\t? {}\n\t\t: $f\n\t, (!$f->{-widget0}\n\t\t? ''\n\t\t: ref($f->{-widget0}) eq 'CODE'\n\t\t? &{$f->{-widget0}}($s, $f, cfpvv($s, $f), cfpvp($s, $f))\n\t\t: $f->{-widget0})\n\t. (!($f->{-action} || $f->{-preact}) && $f->{-namecgi} && defined(cfpvp($s, $f))\n\t\t? '<input type=\"hidden\" name=\"' .$f->{-namecgi} .'__PV_\" value=\"' \n\t\t\t.$s->{-cgi}->escapeHTML(cfpvp($s, $f))\n\t\t\t.'\" />'\n\t\t: ''\n\t\t)\n\t. (!ref($f->{-widget}) && exists($f->{-widget})\n\t? $f->{-widget}\n\t: ref($f->{-widget}) eq 'CODE'\n\t? &{$f->{-widget}}($s, $f, cfpvv($s, $f), cfpvp($s, $f))\n\t: !$f->{-namecgi}\n\t? ''\n\t: ref($f->{-widget}) eq 'HASH'\n\t? (\t $f->{-values}\n\t\t? $s->cgiselect(-name=>$f->{-namecgi}, -title=>$f->{-namecmt}\n\t\t\t, -onchange=>1\n\t\t\t, map {defined($f->{$_}) ? ($_=>$f->{$_}) : ()} qw(-values -labels)\n\t\t\t, -id => $f->{-namecgi}\n\t\t\t, %{$f->{-widget}})\n\t\t: $f->{-rows}\n\t\t? $s->cgitext(-name=>$f->{-namecgi}, -title=>$f->{-namecmt}\n\t\t\t, -id => $f->{-namecgi}\n\t\t\t, %{$f->{-widget}})\n\t\t: $f->{-action} ||$f->{-preact}\n\t\t? $s->{-cgi}->submit(-name=>$f->{-namecgi}, -title=>$f->{-namecmt}, -value=>$f->{-namelbl}\n\t\t\t, -id => $f->{-namecgi}\n\t\t\t, %{$f->{-widget}})\n\t\t: $s->cgistring(-name=>$f->{-namecgi}, -title=>$f->{-namecmt}\n\t\t\t, -id => $f->{-namecgi}\n\t\t\t, %{$f->{-widget}})\n\t\t\t)\n\t: (\t $f->{-values}\n\t\t? $s->cgiselect(-name=>$f->{-namecgi}, -title=>$f->{-namecmt}\n\t\t\t, -id => $f->{-namecgi}\n\t\t\t, -onchange=>1\t\t\t\n\t\t\t, map {\tmy $v =ref($f->{$_}) eq 'CODE' ? &{$f->{$_}}($s, $f, cfpvv($s, $f), cfpvp($s, $f)) : $f->{$_};\n\t\t\t\tdefined($v) ? ($_=>$v) : ()} qw(-values -labels -onchange -readonly -disabled -class -style))\n\t\t: $f->{-rows}\n\t\t? $s->cgitext(-name=>$f->{-namecgi}, -title=>$f->{-namecmt}\n\t\t\t, -id => $f->{-namecgi}\n\t\t\t, map {\tmy $v =ref($f->{$_}) eq 'CODE' ? &{$f->{$_}}($s, $f, cfpvv($s, $f), cfpvp($s, $f)) : $f->{$_};\n\t\t\t\tdefined($v) ? ($_=>$v) : ()} qw(-rows -columns -maxlength -readonly -class -style))\n\t\t: $f->{-action} ||$f->{-preact}\n\t\t? $s->{-cgi}->submit(-name=>$f->{-namecgi}, -title=>$f->{-namecmt}, -value=>$f->{-namelbl}\n\t\t\t, -id => $f->{-namecgi}\n\t\t\t, map {\tmy $v =ref($f->{$_}) eq 'CODE' ? &{$f->{$_}}($s, $f, cfpvv($s, $f), cfpvp($s, $f)) : $f->{$_};\n\t\t\t\tdefined($v) ? ($_=>$v) : ()} qw(-class -style))\n\t\t: $s->cgistring(-name=>$f->{-namecgi}, -title=>$f->{-namecmt}\n\t\t\t, -id => $f->{-namecgi}\n\t\t\t, map {\tmy $v =ref($f->{$_}) eq 'CODE' ? &{$f->{$_}}($s, $f, cfpvv($s, $f), cfpvp($s, $f)) : $f->{$_};\n\t\t\t\tdefined($v) ? ($_=>$v) : ()} qw(-size -maxlength -readonly -disabled -class -style))\n\t\t\t)\n\t)\n\t. (!$f->{-widget1}\n\t\t? ''\n\t\t: ref($f->{-widget1}) eq 'CODE'\n\t\t? &{$f->{-widget1}}($s, $f, cfpvv($s, $f), cfpvp($s, $f))\n\t\t: $f->{-widget1})\n\t);\n }\n if ($bb) {\n\tprint &$cfld($s, {}, $bb);\n\t$bb ='';\n }\n print ref($cfld1) ? &{$cfld1}($s) : $cfld1;\n $err ? undef : 1\n}",
      "file" : "/var/tmp/arv_HOXx4g/ARSObject-0.57/lib/ARSObject.pm",
      "package" : "ARSObject"
   }
]
