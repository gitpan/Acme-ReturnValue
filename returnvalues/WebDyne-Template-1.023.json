[
   {
      "PPI" : "PPI::Statement::Sub",
      "bad" : "sub filter {\n\n\n    my ($self, $data_main_ar, $meta_main_hr)=@_;\n    debug(\"in $self filter\");\n\n\n    my $r=$self->r() ||\n\treturn err('unable to get request object');\n\n\n    my $template_cn=${ $self->template() || return err() };\n    debug(\"template_pn $template_cn, %s\", ref($r));\n    $template_cn || return err('no template file name specified');\n\n\n    ($template_cn eq $r->filename()) &&\n\treturn $data_main_ar;\n\n\n    my $container_ar=$self->compile({\n\n\tsrce\t    =>  $template_cn,\n\tstage1\t    =>  1,\n\n    }) || return err();\n    my ($meta_template_hr, $data_template_ar)=@{$container_ar};\n\n\n    my $perl_template_ar=$meta_template_hr->{'perl'};\n    push @{$meta_main_hr->{'perl'}}, @{$perl_template_ar};\n    my $perl_debug_template_ar=$meta_template_hr->{'perl_debug'};\n    push @{$meta_main_hr->{'perl_debug'}}, @{$perl_debug_template_ar};\n\n\n    my $srce_template_ar=$meta_template_hr->{'manifest'};\n    push @{$meta_main_hr->{'manifest'}}, @{$srce_template_ar};\n\n\n\n\n    my $data_template_head_ar=($self->find_node({\n\n \tdata_ar\t=>  $data_template_ar,\n \ttag\t=>  'head'\n\n       }) || return err())->[0];\n    debug(\"data_template_head_ar $data_template_head_ar %s\", Dumper($data_template_head_ar));\n\n\n\n    my $data_template_head_block_prnt_ar=($self->find_node({\n\n\tdata_ar\t=>  $data_template_head_ar,\n\ttag\t=>  'block',\n\tattr_hr\t=>  { name=>'head' },\n\tprnt_fg\t=>  1,\n\n       }) || return err())->[0];\n    debug(\"data_template_head_block_prnt_ar $data_template_head_block_prnt_ar %s\",\n\t  Dumper($data_template_head_block_prnt_ar));\n\n\n    my $data_template_head_block_ar=($self->find_node({\n\n\tdata_ar\t=>  $data_template_ar,\n\ttag\t=>  'block',\n\tattr_hr\t=>  { name=>'head' }\n\n       }) || return err())->[0];\n    debug(\"data_template_head_block_ar $data_template_head_block_ar %s\",\n\t  Dumper($data_template_head_block_ar));\n\n\n    my $data_main_head_ar=($self->find_node({\n\n\tdata_ar\t=>  $data_main_ar,\n\ttag\t=>  'head'\n\n       }) || return err())->[0];\n    debug(\"data_main_head_ar $data_main_head_ar %s\",\n\t  Dumper($data_main_head_ar));\n\n\n    my $data_main_title_ar=($self->find_node({\n\n\tdata_ar\t=>  $data_main_ar,\n\ttag\t=>  'title'\n\n       }) || return err())->[0];\n    my $data_template_title_ar=($self->find_node({\n\n\tdata_ar\t=>  $data_template_ar,\n\ttag\t=>  'title'\n\n       }) || return err())->[0];\n    $data_main_title_ar->[$WEBDYNE_NODE_CHLD_IX][0]=join(' - ', grep {$_} \n\t$data_template_title_ar->[$WEBDYNE_NODE_CHLD_IX][0],$data_main_title_ar->[$WEBDYNE_NODE_CHLD_IX][0]);\n\n\n    $data_template_head_ar->[$WEBDYNE_NODE_ATTR_IX]=\n\t$data_main_head_ar->[$WEBDYNE_NODE_ATTR_IX];\n\n\n    foreach my $data_chld_ix (0 .. $#{$data_template_head_block_prnt_ar->[$WEBDYNE_NODE_CHLD_IX]}) {\n\n\n \tmy $data_chld_ar=$data_template_head_block_prnt_ar->[$WEBDYNE_NODE_CHLD_IX][$data_chld_ix];\n \tnext unless ($data_chld_ar eq $data_template_head_block_ar);\n\n\n \tsplice @{$data_template_head_block_prnt_ar->[$WEBDYNE_NODE_CHLD_IX]},$data_chld_ix,1,\n \t    @{$data_main_head_ar->[$WEBDYNE_NODE_CHLD_IX]};\n \tlast;\n\n    }\n\n\n\n\n    my $data_template_body_ar=($self->find_node({\n\n \tdata_ar\t=>  $data_template_ar,\n \ttag\t=>  'body'\n\n       }) || return err())->[0];\n    debug(\"data_template_body_ar $data_template_body_ar %s\", Dumper($data_template_body_ar));\n\n\n\n    my $data_template_body_block_prnt_ar=($self->find_node({\n\n\tdata_ar\t=>  $data_template_body_ar,\n\ttag\t=>  'block',\n\tattr_hr\t=>  { name=>'body' },\n\tprnt_fg\t=>  1,\n\n       }) || return err())->[0];\n    debug(\"data_template_body_block_prnt_ar $data_template_body_block_prnt_ar %s\",\n\t  Dumper($data_template_body_block_prnt_ar));\n\n\n    my $data_template_body_block_ar=($self->find_node({\n\n\tdata_ar\t=>  $data_template_ar,\n\ttag\t=>  'block',\n\tattr_hr\t=>  { name=>'body' }\n\n       }) || return err())->[0];\n    debug(\"data_template_body_block_ar $data_template_body_block_ar %s\",\n\t  Dumper($data_template_body_block_ar));\n\n\n    my $data_main_body_ar=($self->find_node({\n\n\tdata_ar\t=>  $data_main_ar,\n\ttag\t=>  'body'\n\n       }) || return err())->[0];\n    debug(\"data_main_body_ar $data_main_body_ar %s\",\n\t  Dumper($data_main_body_ar));\n\n\n    $data_template_body_ar->[$WEBDYNE_NODE_ATTR_IX]=\n\t$data_main_body_ar->[$WEBDYNE_NODE_ATTR_IX];\n\n\n    foreach my $data_chld_ix (0 .. $#{$data_template_body_block_prnt_ar->[$WEBDYNE_NODE_CHLD_IX]}) {\n\n\n \tmy $data_chld_ar=$data_template_body_block_prnt_ar->[$WEBDYNE_NODE_CHLD_IX][$data_chld_ix];\n \tnext unless ($data_chld_ar eq $data_template_body_block_ar);\n\n\n \tsplice @{$data_template_body_block_prnt_ar->[$WEBDYNE_NODE_CHLD_IX]},$data_chld_ix,1,\n \t    @{$data_main_body_ar->[$WEBDYNE_NODE_CHLD_IX]};\n \tlast;\n\n\n    }\n\n\n    return $data_template_ar;\n\n}",
      "file" : "/var/tmp/arv_VDRTNZ/WebDyne-Template-1.023/lib/WebDyne/Template.pm",
      "package" : "WebDyne::Template"
   }
]
